<div class="questionnaire-form-container">
  @if (questionnaire) {
    <div class="questionnaire-header">
      <h3>{{ questionnaire.title }}</h3>
      @if (questionnaire.description) {
        <p class="questionnaire-description">
          {{ questionnaire.description }}
        </p>
      }
      <div class="questionnaire-meta">
        <span class="status-badge" [class]="questionnaire.status">{{ questionnaire.status }}</span>
        @if (questionnaire.version) {
          <span class="version-info">v{{ questionnaire.version }}</span>
        }
      </div>
    </div>
  }

  <!-- Loading indicator -->
  @if (questionnaire && !formRendered) {
    <div class="loading-questionnaire">
      <mat-spinner diameter="40"></mat-spinner>
      <p>Loading questionnaire...</p>
    </div>
  }

  <!-- LForms container -->
  <div [id]="formContainerId" class="lforms-container" [class.hidden]="!formRendered"></div>

  <!-- No questionnaire message -->
  @if (!questionnaire) {
    <div class="no-questionnaire">
      <mat-icon>description</mat-icon>
      <p>No questionnaire loaded</p>
      <p class="hint">Select a questionnaire from the dropdown above</p>
    </div>
  }

  <!-- Action buttons -->
  @if (questionnaire && formRendered) {
    <div class="form-actions">
      <button mat-flat-button color="primary" (click)="submitForm()">
        <mat-icon>save</mat-icon>
        Submit Response
      </button>
      <button mat-stroked-button (click)="cancel()">
        <mat-icon>close</mat-icon>
        Cancel
      </button>
    </div>
  }
</div>
