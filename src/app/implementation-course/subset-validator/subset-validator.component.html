<!-- subset-validator.component.html -->
<div class="layout-container">
    <div class="left-column">
        <div class="upload-controls">
            <h3>Subset Members Validator</h3>
            <p>Validating against {{ terminologyService.getFhirUrlParam() }}</p>
            <p class="terminal-style" *ngIf="studentSubsetDefinition">{{studentSubsetDefinition}}</p>
            <input type="file" #fileInput style="display: none" (change)="onSubsetmembersFileSelected($event)" />
            <input type="file" #fileInputDefinition style="display: none" (change)="onDefinitionFileSelected($event)" />
            <div class="buttons-panel">
                <button mat-flat-button color="primary" (click)="fileInputDefinition.click()">Upload Definition File</button>
                <button mat-flat-button color="primary" (click)="fileInput.click()">Upload Members File</button>
                <button mat-flat-button color="primary" (click)="validateSubsetMembers()"
                [disabled]="!studentSubsetDefinition || !studentSubsetMembersDataSource.data.length">Validate</button>
                <mat-spinner *ngIf="loading || validatingMembers || validatingDefinition" class="spinner" diameter="30"></mat-spinner>
            </div>
            <div class="blue-rounded-div" *ngIf="definitionValidationResult || membersValidationResult">
                <h4>Validation Results</h4>
                <p class="validation-result">{{definitionValidationResult}}</p>
                <p class="validation-result">{{membersValidationResult}}</p>
            </div>
        </div>
        <!-- Table to display the data -->
        <div *ngIf="!loading && studentSubsetMembersDataSource.data.length" class="table-container">
          <table mat-table [dataSource]="studentSubsetMembersDataSource">
            <!-- Referenced Component ID Column -->
            <ng-container matColumnDef="referencedComponentId">
              <th mat-header-cell *matHeaderCellDef>ID</th>
              <td mat-cell *matCellDef="let element">{{ element.referencedComponentId }}</td>
            </ng-container>
      
            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let element">{{ element.name }}</td>
            </ng-container>

            <!-- Result Column -->
            <ng-container matColumnDef="result">
                <th mat-header-cell *matHeaderCellDef>Result</th>
                <td mat-cell *matCellDef="let element">{{ element.result.value }}</td>
            </ng-container>

            <!-- Result Column -->
            <ng-container matColumnDef="scope">
                <th mat-header-cell *matHeaderCellDef>Scope</th>
                <td mat-cell *matCellDef="let element">{{ element.scope.value }}</td>
            </ng-container>
      
            <!-- Header and Rows -->
            <tr mat-header-row *matHeaderRowDef="studentSubsetMembersDisplayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: studentSubsetMembersDisplayedColumns;"></tr>
          </table>
        </div>
    </div>
    <div class="right-column">
        <h3>Assignment</h3>

        <button mat-flat-button color="accent" [matMenuTriggerFor]="demosMenu">Selected assignment: {{ selectedAssignment }}</button>
        <mat-menu #demosMenu="matMenu" class="wide-menu">
            <button mat-menu-item (click)="setAssignment('moduleD')">Module D Assignment</button>
        </mat-menu>

        <h3>Instructions</h3>
        <div class="instructions">
            <ol>
                <li>Select assignment</li>
                <li>Upload definition file</li>
                <li>Upload members file</li>
                <li>Click validate</li>
            </ol>
        </div>
        <!-- <div class="upload-controls">
            <h3>Reference Data</h3>
        </div> -->
        <!-- <div *ngIf="referenceDataDataSource.data.length" class="table-container">
            <table mat-table [dataSource]="referenceDataDataSource">
              <ng-container matColumnDef="referencedComponentId">
                <th mat-header-cell *matHeaderCellDef>ID</th>
                <td mat-cell *matCellDef="let element">{{ element.referencedComponentId }}</td>
              </ng-container>
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Name</th>
                <td mat-cell *matCellDef="let element">{{ element.name }}</td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="referenceDataDisplayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: referenceDataDisplayedColumns;"></tr>
            </table>
        </div> -->
    </div>
  </div>
  