<h3 class="centered-box">Overall calculated maturity score: {{ calculateOverallAverage(maturityResponse) }}</h3>
<table class="bordered-table">
  <thead>
    <tr>
      <th>KPA</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let stakeholder of getStakeholders(maturityResponse)">
      <ng-container *ngIf="stakeholder == maturityResponse.selectedStakeholder">
        <ng-container *ngFor="let kpa of getKpas(maturityResponse, stakeholder)">
          <ng-container *ngFor="let question of getQuestions(maturityResponse, stakeholder, kpa) | keyvalue; let i = index">
            <tr>
              <!-- KPA Column -->
              <td *ngIf="isFirstRowInKpa(i)" 
                  [attr.rowspan]="getKpaRowSpan(maturityResponse, stakeholder, kpa)">
                {{ kpa | titlecase }}
              </td>
  
              <!-- Result Column -->
              <td *ngIf="isFirstRowInKpa(i)" 
                  [attr.rowspan]="getKpaRowSpan(maturityResponse, stakeholder, kpa)">
                {{ calculateAverage(getQuestions(maturityResponse, stakeholder, kpa)) | number: '1.2-2' }}
              </td>
            </tr>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </tbody>
</table>

<div class="chart-container">
  <canvas #radarCanvas></canvas>
</div>
